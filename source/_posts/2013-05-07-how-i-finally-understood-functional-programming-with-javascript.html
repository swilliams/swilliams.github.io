---
layout: post
title: "How I Finally Understood Functional Programming With JavaScript"
date: 2013-05-07 02:10:54
comments: false
author: Scott Williams
categories: []
---
<p>Functional programming has always been a bit of a mindbender for me. I’ve read plenty of tutorials on the subject, but it wasn’t until recently that it finally started to click for me.</p>

<p>The basics of partial function application involves something like this.</p><pre class="source-code"><span class="cm-keyword">var</span> <span class="cm-variable">slice</span> = <span class="cm-variable">Array</span>.<span class="cm-property">prototype</span>.<span class="cm-property">slice</span>; <span class="cm-comment">// just to simplify things</span><br><span class="cm-keyword">var</span> <span class="cm-variable">partial</span> = <span class="cm-keyword">function</span>(<span class="cm-def">fn</span>) {<br>  <span class="cm-keyword">var</span> <span class="cm-def">args</span> = <span class="cm-variable">slice</span>.<span class="cm-property">call</span>(<span class="cm-variable-2">arguments</span>, <span class="cm-number">1</span>);<br>  <span class="cm-keyword">return</span> <span class="cm-keyword">function</span>() {<br>    <span class="cm-keyword">return</span> <span class="cm-variable">fn</span>.<span class="cm-property">apply</span>(<span class="cm-variable-2">this</span>, <span class="cm-variable">args</span>.<span class="cm-property">concat</span>(<span class="cm-variable">slice</span>.<span class="cm-property">call</span>(<span class="cm-variable-2">arguments</span>)));<br>  };<br>};</pre><p class="p1">Bwah?</p><p class="p1">What this does is take a function as a parameter. It then takes all the other parameters and hangs on to them. It returns another function, that when called, executes that first one, with the original arguments <em>and</em> any new ones you pass in.</p><p class="p1">Bwah?</p><p>Let’s use a primitive example to try to unwind this thing.</p><p></p><pre class="source-code"><span class="cm-keyword">var</span> <span class="cm-variable">add</span> = <span class="cm-keyword">function</span>(<span class="cm-def">a</span>, <span class="cm-def">b</span>) {<br>  <span class="cm-keyword">return</span> <span class="cm-variable-2">a</span> + <span class="cm-variable-2">b</span>;<br>};<br><br><span class="cm-keyword">var</span> <span class="cm-variable">add5to</span> = <span class="cm-variable">partial</span>(<span class="cm-variable">add</span>, <span class="cm-number">5</span>);</pre><p>Now when you call <code>add5to(3)</code> you’ll get 8. Yes, this will always add 5 to whatever you supply to it. Yes, it is absolutely useless.</p>

<p>This is where a lot of tutorials stop, leaving you to think “OMG WHO CARES?!” and then get back to doing important things, like stamp collecting.</p>

<p>And that’s where I stopped for the longest time too. But then when I watched <a href="http://vimeo.com/43382919">this video</a> a light came on to realize that this could be <em>useful</em>. You can use it to build a pretty nice DSL that creates nested DOM elements.</p>

<p>Let’s say you have a function called <code>el</code> that takes  <code>tagName</code>, <code>attributes</code>, and <code>content</code> as parameters.</p><pre class="source-code"><span class="cm-keyword">var</span> <span class="cm-variable">el</span> = <span class="cm-keyword">function</span>(<span class="cm-def">tagName</span>, <span class="cm-def">attributes</span>, <span class="cm-def">content</span>) {<br>  <span class="cm-comment">// snip</span><br>};<br><span class="cm-keyword">var</span> <span class="cm-variable">element</span> = <span class="cm-variable">el</span>(<span class="cm-variable">“div</span><span class="cm-variable">”</span>, {<span class="cm-variable">className</span>: <span class="cm-variable">‘foo</span><span class="cm-variable">’</span>, <span class="cm-variable">id</span>: <span class="cm-variable">‘bar</span><span class="cm-variable">’</span>}, <span class="cm-variable">“Hi</span> <span class="cm-variable">I</span><span class="cm-variable">’m</span> <span class="cm-variable">a</span> <span class="cm-variable">div</span>!<span class="cm-variable">”</span>);<br><span class="cm-comment">// results in:</span><br><span class="cm-comment">// &lt;div id=“bar” class=“foo”&gt;Hi I’m a div!&lt;/div&gt;</span></pre><p>Let’s also say that if you leave out <code>attributes</code>, it treats the second parameter as <code>content</code>.</p><pre class="source-code">    <span class="cm-variable">el</span>(<span class="cm-variable">“p</span><span class="cm-variable">”</span>, <span class="cm-variable">“Call</span> <span class="cm-variable">me</span> <span class="cm-variable">Ishmael</span>.<span class="cm-variable">”</span>);<br>    <span class="cm-comment">// &lt;p&gt;Call me Ishamel.&lt;/p&gt;</span></pre><p>That in itself is a little useful, but here’s where partial function application comes in. Cram <code>el</code> into <code>partial</code> and stuff starts to get real.</p><pre class="source-code"><span class="cm-keyword">var</span> <span class="cm-variable">div</span> = <span class="cm-variable">partial</span>(<span class="cm-variable">el</span>, <span class="cm-variable">“div</span><span class="cm-variable">”</span>);<br><span class="cm-keyword">var</span> <span class="cm-variable">element</span> = <span class="cm-variable">div</span>({<span class="cm-property">className</span>: <span class="cm-variable">‘foo</span><span class="cm-variable">’</span>, <span class="cm-variable">id</span>: <span class="cm-variable">‘bar</span><span class="cm-variable">’</span>}, <span class="cm-variable">“Hi</span> <span class="cm-variable">I</span><span class="cm-variable">’m</span> <span class="cm-variable">a</span> <span class="cm-variable">div</span>!<span class="cm-variable">”</span>)</pre><p>In fact, we can quickly make functions for many HTML tags.</p><pre class="source-code"><span class="cm-keyword">var</span> <span class="cm-variable">DOM</span> = {};<br>[<span class="cm-variable">“div</span><span class="cm-variable">”</span>, <span class="cm-variable">“p</span><span class="cm-variable">”</span>, <span class="cm-variable">“ul</span><span class="cm-variable">”</span>, <span class="cm-variable">“ol</span><span class="cm-variable">”</span>, <span class="cm-variable">“li</span><span class="cm-variable">”</span>].<span class="cm-property">forEach</span>(<span class="cm-keyword">function</span>(<span class="cm-def">t</span>) {<br>  <span class="cm-variable">DOM</span>[<span class="cm-variable-2">t</span>] = <span class="cm-variable">partial</span>(<span class="cm-variable">el</span>, <span class="cm-variable-2">t</span>);<br>});</pre><p>Now you can string a bunch of stuff together.</p><pre class="source-code"><span class="cm-keyword">var</span> <span class="cm-variable">list</span> = <span class="cm-variable">DOM</span>.<span class="cm-property">ul</span>(<br>            [<span class="cm-variable">DOM</span>.<span class="cm-property">li</span>(<span class="cm-variable">“one</span><span class="cm-variable">”</span>), <br>             <span class="cm-variable">DOM</span>.<span class="cm-property">li</span>(<span class="cm-variable">“two</span><span class="cm-variable">”</span>), <br>             <span class="cm-variable">DOM</span>.<span class="cm-property">li</span>(<span class="cm-variable">“three</span><span class="cm-variable">”</span>)]);</pre><p>Theeeeen, take into account something like <code>map</code> and you can really start to make some magic.</p><pre class="source-code"><span class="cm-keyword">var</span> <span class="cm-variable">people</span> = [{<span class="cm-property">name</span>: <span class="cm-variable">“Scott</span><span class="cm-variable">”</span>}, {<span class="cm-property">name</span>: <span class="cm-variable">“Bob</span><span class="cm-variable">”</span>}, {<span class="cm-property">name</span>: <span class="cm-variable">“Barry</span><span class="cm-variable">”</span>}];<br><span class="cm-keyword">var</span> <span class="cm-variable">names</span> = <span class="cm-variable">people</span>.<span class="cm-property">map</span>(<span class="cm-keyword">function</span>(<span class="cm-def">p</span>) {<span class="cm-keyword">return</span> <span class="cm-variable">DOM</span>.<span class="cm-property">li</span>(<span class="cm-variable-2">p</span>.<span class="cm-property">name</span>); });<br><span class="cm-keyword">var</span> <span class="cm-variable">list</span> = <span class="cm-variable">DOM</span>.<span class="cm-property">ul</span>(<span class="cm-variable">names</span>);</pre><p>All of a sudden you have a quick list of DOM elements with names of people in them. You can refactor that out some more, but I wanted to just focus on just the <code>partial</code> bit of this.</p>

<p>When would be a good time to use this? When you have a bunch of functions that act similarly but vary slightly on parameters. </p>

<p>The power of this lies in that you can take an incredibly simple function, and then use it to build complex mechanisms out of it. I’m still nowhere near an expert on this, but I think this time the wrinkles in my brain may just sink in.</p>